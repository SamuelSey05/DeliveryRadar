var __awaiter=this&&this.__awaiter||function(t,e,r,i){function n(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i["throw"](t))}catch(t){a(t)}}function c(t){t.done?r(t.value):n(t.value).then(o,s)}c((i=i.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return c([t,e])}}function c(s){if(i)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(r=0)),r)try{if(i=1,n&&(a=s[0]&2?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;if(n=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;n=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(s[0]===6&&r.label<a[1]){r.label=a[1];a=s;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(s);break}if(a[2])r.ops.pop();r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t];n=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};import{s as sdk,S as ScriptInitParameter,a as SESSION_ID_KEY}from"./index-c9f2fa76.js";import{g as getScriptInitOptions,u as utilisation}from"./utilisation-56fb7f8e.js";function appGlobalScript(){return __awaiter(this,void 0,void 0,(function(){var t,e,r,i,n,a,o,s,c,u,f;return __generator(this,(function(l){switch(l.label){case 0:t=window;if(!t)return[2];e=t.w3w,r=e===void 0?{}:e;i=r.callback,n=r.key,a=r.host,o=r.version,s=r.headers;c=getScriptInitOptions();u=n||c[ScriptInitParameter.KEY];if(u){sdk.api.setApiKey(u);utilisation.setApiKey(u)}if(a||c[ScriptInitParameter.BASEURL]){sdk.api.setConfig({host:a||c[ScriptInitParameter.BASEURL]})}if(o||c[ScriptInitParameter.VERSION]){sdk.api.setConfig({apiVersion:o||c[ScriptInitParameter.VERSION]})}if(s){sdk.api.setConfig({headers:s})}t.what3words=sdk;if(!!t.sessionStorage.getItem(SESSION_ID_KEY))return[3,2];return[4,import("./index-111e19d0.js")];case 1:f=l.sent().v4;t.sessionStorage.setItem(SESSION_ID_KEY,f({rng:function(){var t=[];for(var e=0;e<16;e++){t.push(Math.round(Math.random()*255))}return t}}));l.label=2;case 2:t.what3words_session_id=t.sessionStorage.getItem(SESSION_ID_KEY);if(i&&typeof t[i]==="function"){t[i](sdk)}if(c[ScriptInitParameter.CALLBACK]&&typeof t[c[ScriptInitParameter.CALLBACK]]==="function"){t[c[ScriptInitParameter.CALLBACK]]()}return[2]}}))}))}var globalScripts=appGlobalScript;export{globalScripts as g};